# 分布式概览

  
## 分布式理论基础
### CAP
**CAP 理论是分布式中基础理论，有三个重要指标：一致性、可用性、分区容错性。**
* 一致性（Consistency）：一致性意思就是写操作之后进行读操作无论在哪个节点都需要返回写操作的值
* 可用性（Availability）：非故障的节点在合理的时间内返回合理的响应
* 分区容错性（Partition Tolerance）：当网络出现分区后，系统依然能够继续履行职责


在分布式的环境下，网络无法做到100%可靠，有可能出现故障，因此分区是一个必须的选项，如果选择了CA而放弃了P，若发生分区现象，为了保证C，系统需要禁止写入，此时就与A发生冲突，如果是为了保证A，则会出现正常的分区可以写入数据，有故障的分区不能写入数据，则与C就冲突了。因此分布式系统理论上不可能选择CA架构，而必须选择CP或AP架构。

### BASE（最终一致性）
> BASE是对CAP 理论中强一致性和可用性权衡的结果，其来源于对大规模互联网系统分布式实践的总结，是基于CAP定理逐步演化而来的，其核心思想是即使无法做到强一致性(Strong consistency)，每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性(Eventual consistency)。

BASE理论是对CAP的延伸和补充，是对CAP中的AP方案的一个补充，即在选择AP方案的情况下，如何更好的最终达到C。

BASE是基本可用，柔性状态，最终一致性三个短语的缩写，核心的思想是即使无法做到强一致性，但应用可以采用适合的方式达到最终一致性。

多数情况下，其实我们也并非一定要求强一致性，部分业务可以容忍一定程度的延迟一致，所以为了兼顾效率，发展出来了最终一致性理论BASE
* BA-基本可用(Basically Available)：基本可用是指分布式系统在出现故障的时候，允许损失部分可用性，即保证核心可用。
* S-软状态(Soft State)：软状态是指允许系统存在中间状态，而该中间状态不会影响系统整体可用性。分布式存储中一般一份数据至少会有三个副本，允许不同节点间副本同步的延时就是软状态的体现。
* E-最终一致性(Eventual Consistency)：最终一致性是指系统中的所有数据副本经过一定时间后，最终能够达到一致的状态。弱一致性和强一致性相反，最终一致性是弱一致性的一种特殊情况。

## 一致性算法
> 分布式架构的核心就在一致性的实现和妥协，那么如何设计一套算法来保证不同节点之间的通信和数据达到无限趋向一致性，就非常重要了。


## 参考文章
* [分布式架构知识体系](https://mp.weixin.qq.com/s/9xINMH9tJlmsjH6QdUPFxQ "分布式架构知识体系")
* [通过一个订单查看微服务整个流程](https://juejin.cn/post/6844903846548865032 "通过一个订单查看微服务整个流程")
* [分布式整体概览从CAP说起](https://juejin.cn/post/6844903936718012430 "分布式整体概览从CAP说起")


## 学习资料
* [分布式系统合集](https://mp.weixin.qq.com/s?__biz=MzU2NzEwMDc4OQ==&mid=2247484527&idx=1&sn=d00e7991078e46af96b662eb0b57de65)
